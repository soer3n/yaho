<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=description content="Documentation for yaho"><meta name=author content="soer3n"><link rel=icon href=../images/favicon.png type=image/png><title>Usage :: yaho</title><link href=../css/nucleus.css?1681551629 rel=stylesheet><link href=../css/fontawesome-all.min.css?1681551629 rel=stylesheet><link href=../css/hybrid.css?1681551629 rel=stylesheet><link href=../css/featherlight.min.css?1681551629 rel=stylesheet><link href=../css/perfect-scrollbar.min.css?1681551629 rel=stylesheet><link href=../css/auto-complete.css?1681551629 rel=stylesheet><link href=../css/atom-one-dark-reasonable.css?1681551629 rel=stylesheet><link href=../css/theme.css?1681551629 rel=stylesheet><link href=../css/tabs.css?1681551629 rel=stylesheet><link href=../css/hugo-theme.css?1681551629 rel=stylesheet><link href=../css/theme-blue.css?1681551629 rel=stylesheet><script src=../js/jquery-3.3.1.min.js?1681551629></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../usage/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=../><b>y</b>et <b>a</b>nother <b>h</b>elm <b>o</b>perator</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../js/lunr.min.js?1681551629></script>
<script type=text/javascript src=../js/auto-complete.js?1681551629></script>
<script type=text/javascript>var baseurl="https://soer3n.github.io/yaho"</script><script type=text/javascript src=../js/search.js?1681551629></script></div><section id=homelinks><ul><li><a class=padding href=../><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/installation/ title=Installation class=dd-item><a href=../installation/>Installation</a></li><li data-nav-id=/architecture/ title=Architecture class=dd-item><a href=../architecture/>Architecture</a><ul><li data-nav-id=/architecture/repository/ title=Repositories class=dd-item><a href=../architecture/repository/>Repositories</a></li><li data-nav-id=/architecture/chart/ title=Charts class=dd-item><a href=../architecture/chart/>Charts</a></li><li data-nav-id=/architecture/release/ title=Releases class=dd-item><a href=../architecture/release/>Releases</a></li><li data-nav-id=/architecture/value/ title=Values class=dd-item><a href=../architecture/value/>Values</a></li></ul></li><li data-nav-id=/configuration/ title=Configuration class=dd-item><a href=../configuration/>Configuration</a><ul><li data-nav-id=/configuration/release/ title=Releases class=dd-item><a href=../configuration/release/>Releases</a></li></ul></li><li data-nav-id=/development/ title=Development class=dd-item><a href=../development/>Development</a></li><li data-nav-id=/usage/ title=Usage class="dd-item
active"><a href=../usage/>Usage</a><ul><li data-nav-id=/usage/repos_charts/ title="Respositories & Charts" class=dd-item><a href=../usage/repos_charts/>Respositories & Charts</a></li><li data-nav-id=/usage/releases/ title=Releases class=dd-item><a href=../usage/releases/>Releases</a></li></ul></li><li data-nav-id=/plans/ title="Plans & ToDos" class=dd-item><a href=../plans/>Plans & ToDos</a></li><li data-nav-id=/contributing/ title=Contributing class=dd-item><a href=../contributing/>Contributing</a></li></ul><section id=footer><center><a class=github-button href=https://github.com/soer3n/yaho data-icon=octicon-cloud-download aria-label="Download matcornic/hugo-theme-learn on GitHub">GitHub</a>
<a class=github-button href=https://github.com/soer3n/yaho/stargazers data-icon=octicon-star data-show-count=true aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>
<a class=github-button href=https://github.com/soer3n/yaho/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></center><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span class=links>Usage</span></div></div></div><div id=head-tags></div><div id=chapter><div id=body-inner><h4 id=general-usage>General usage</h4><blockquote><p>There is a more complex configuration sample in <a href=https://github.com/soer3n/apps-operator/blob/master/examples>these</a> directory.</p></blockquote><h5 id=preparation>Preparation</h5><p>All you need is a kubernetes cluster and a valid kubeconfig for deploying resources to it. You can also setup a kind cluster for testing.</p><pre tabindex=0><code>
# install kind cluster
kind create cluster --config testutils/kind.yaml --image kindest/node:v1.23.5
</code></pre><p>Now you can follow the <a href=../installation>install instructions</a> to deploy the operator and rbac belonging to it. For installing releases you need to setup a service account with a cluster-role-binding or role-binding like this.</p><pre tabindex=0><code>---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: helm-releases
  namespace: helm

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: helm-releases-role
rules:
- apiGroups:
  - &#39;&#39;
  - &#39;apps&#39;
  resources:
  - &#39;*&#39;
  verbs:
  - &#39;*&#39;

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: helm-releases-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: helm-releases-role
subjects:
- kind: ServiceAccount
  name: helm-releases
  namespace: helm
</code></pre><p>As a last step you need to setup a config resource. There you need to specify the name of the created service account. Installation and upgrade flags as well as allowed namespaces can also be configured there. The config needs to be in the same namespace as the release custom resource which should use it.</p><pre tabindex=0><code>
---
apiVersion: yaho.soer3n.dev/v1alpha1
kind: Config
metadata:
  name: helm-release-config
  namespace: helm
spec:
  serviceAccountName: helm-releases
  namespace:
    install: false
    allowed:
    - share
    - helm
  flags:
    atomic: false
    skipCRDs: false
    subNotes: true
    disableOpenAPIValidation: false
    dryRun: false
    disableHooks: false
    wait: false
    cleanupOnFail: false
    recreate: false
    timeout: 3600
    force: false
    description: &#34;test description&#34;
</code></pre><p>Now everything is ready for deploying your first repositories and charts in the next step.</p><footer class=footline></footer></div></div></div><div id=navigation><a class="nav nav-prev" href=../development/ title=Development><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../usage/repos_charts/ title="Respositories & Charts" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../js/clipboard.min.js?1681551629></script>
<script src=../js/perfect-scrollbar.min.js?1681551629></script>
<script src=../js/perfect-scrollbar.jquery.min.js?1681551629></script>
<script src=../js/jquery.sticky.js?1681551629></script>
<script src=../js/featherlight.min.js?1681551629></script>
<script src=../js/highlight.pack.js?1681551629></script>
<script>hljs.initHighlightingOnLoad()</script><script src=../js/modernizr.custom-3.6.0.js?1681551629></script>
<script src=../js/learn.js?1681551629></script>
<script src=../js/hugo-learn.js?1681551629></script>
<script src=../mermaid/mermaid.js?1681551629></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>