<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=description content="Documentation for yaho"><meta name=author content="soer3n"><link rel=icon href=../images/favicon.png type=image/png><title>Development :: yaho</title>
<link href=../css/nucleus.css?1703459771 rel=stylesheet><link href=../css/fontawesome-all.min.css?1703459771 rel=stylesheet><link href=../css/hybrid.css?1703459771 rel=stylesheet><link href=../css/featherlight.min.css?1703459771 rel=stylesheet><link href=../css/perfect-scrollbar.min.css?1703459771 rel=stylesheet><link href=../css/auto-complete.css?1703459771 rel=stylesheet><link href=../css/atom-one-dark-reasonable.css?1703459771 rel=stylesheet><link href=../css/theme.css?1703459771 rel=stylesheet><link href=../css/tabs.css?1703459771 rel=stylesheet><link href=../css/hugo-theme.css?1703459771 rel=stylesheet><link href=../css/theme-blue.css?1703459771 rel=stylesheet><script src=../js/jquery-3.3.1.min.js?1703459771></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../development/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=../><b>y</b>et <b>a</b>nother <b>h</b>elm <b>o</b>perator</a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../js/lunr.min.js?1703459771></script><script type=text/javascript src=../js/auto-complete.js?1703459771></script><script type=text/javascript>var baseurl="https://soer3n.github.io/yaho"</script><script type=text/javascript src=../js/search.js?1703459771></script></div><section id=homelinks><ul><li><a class=padding href=../><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/installation/ title=Installation class=dd-item><a href=../installation/>Installation</a></li><li data-nav-id=/architecture/ title=Architecture class=dd-item><a href=../architecture/>Architecture</a><ul><li data-nav-id=/architecture/repository/ title=Repositories class=dd-item><a href=../architecture/repository/>Repositories</a></li><li data-nav-id=/architecture/chart/ title=Charts class=dd-item><a href=../architecture/chart/>Charts</a></li><li data-nav-id=/architecture/release/ title=Releases class=dd-item><a href=../architecture/release/>Releases</a></li><li data-nav-id=/architecture/value/ title=Values class=dd-item><a href=../architecture/value/>Values</a></li></ul></li><li data-nav-id=/configuration/ title=Configuration class=dd-item><a href=../configuration/>Configuration</a><ul><li data-nav-id=/configuration/release/ title=Releases class=dd-item><a href=../configuration/release/>Releases</a></li></ul></li><li data-nav-id=/development/ title=Development class="dd-item
active"><a href=../development/>Development</a></li><li data-nav-id=/usage/ title=Usage class=dd-item><a href=../usage/>Usage</a><ul><li data-nav-id=/usage/repos_charts/ title="Respositories & Charts" class=dd-item><a href=../usage/repos_charts/>Respositories & Charts</a></li><li data-nav-id=/usage/releases/ title=Releases class=dd-item><a href=../usage/releases/>Releases</a></li></ul></li><li data-nav-id=/plans/ title="Plans & ToDos" class=dd-item><a href=../plans/>Plans & ToDos</a></li><li data-nav-id=/contributing/ title=Contributing class=dd-item><a href=../contributing/>Contributing</a></li></ul><section id=footer><center><a class=github-button href=https://github.com/soer3n/yaho data-icon=octicon-cloud-download aria-label="Download matcornic/hugo-theme-learn on GitHub">GitHub</a>
<a class=github-button href=https://github.com/soer3n/yaho/stargazers data-icon=octicon-star data-show-count=true aria-label="Star matcornic/hugo-theme-learn on GitHub">Star</a>
<a class=github-button href=https://github.com/soer3n/yaho/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork matcornic/hugo-theme-learn on GitHub">Fork</a><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></center><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Development</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Development</h1><h4 id=local>Local</h4><p>To start the operator locally there are only two commands nessecarry.</p><pre tabindex=0><code>
# generating crds if needed (when something changed in &#39;apis&#39; folder)
make generate

# installing crds
make install

# starting the operator
WATCH_NAMESPACE=helm make run
</code></pre><h4 id=testing>Testing</h4><p>Tests are splitted into two kinds. Unit tests implementent with the builtin testing and ginkgo framework package and integration tests build with operator-sdk and kubebuilder.</p><h5 id=unit>Unit</h5><pre tabindex=0><code>
# running all unit tests
go test -v ./tests/unit/... 

# running only filtered unit tests (e.g. run only tests related to values model)
go test -v ./tests/unit/... -test.run TestValues
</code></pre><h5 id=integration>Integration</h5><pre tabindex=0><code>
# running integration tests
go test -v ./tests/e2e/...
</code></pre><div class="notices info"><p>To run only specific tests you need to focus them with an &lsquo;F&rsquo; before &lsquo;It&rsquo; keyword.</p></div><pre tabindex=0><code>
# ./tests/e2e/controller/..._test.go

...
var _ = Context(&#34;...&#34;, func() {

    ...

	Describe(&#34;...&#34;, func() {

        ...
		FIt(...
</code></pre><h4 id=debugging>Debugging</h4><p>When you are using vscode there is an launch.json already present in the project. It can be used for everything needed. There are three configurations. For debugging integration and unit tests and also for the operator. Environment variables can be set as usual in vscode.</p><div class="notices note"><p>If you want to debug a failed integration test you only need to change the WATCH_NAMESPACE variable in launch.json to the namespace which was generated while running the failed test.</p></div><h4 id=remote>Remote</h4><p>You can use every tool for golang remote development. There are no special things to care about. If you choose for example okteto, only a normal configuration file is needed. For example like this:</p><pre tabindex=0><code>name: yaho
namespace: dev
autocreate: true
image: okteto/golang:1.18
command: bash
securityContext:
  capabilities:
    add:
    - SYS_PTRACE
volumes:
- /go/pkg/
- /root/.cache/go-build/
sync:
- .:/usr/src/app
environment:
  PATH: $PATH:/usr/local/go/bin:/go/bin
persistentVolume:
  enabled: true
  storageClass: local-path-storage
  size: 1Gi
resources:
  requests:
    memory: &#34;512Mi&#34;
    cpu: &#34;250m&#34;
  limits:
    memory: &#34;1024Mi&#34;
    cpu: &#34;500m&#34;
initContainer:
  resources:
    requests:
      cpu: 125m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi
interface: 0.0.0.0
</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../configuration/release/ title=Releases><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../usage/ title=Usage style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../js/clipboard.min.js?1703459771></script><script src=../js/perfect-scrollbar.min.js?1703459771></script><script src=../js/perfect-scrollbar.jquery.min.js?1703459771></script><script src=../js/jquery.sticky.js?1703459771></script><script src=../js/featherlight.min.js?1703459771></script><script src=../js/highlight.pack.js?1703459771></script><script>hljs.initHighlightingOnLoad()</script><script src=../js/modernizr.custom-3.6.0.js?1703459771></script><script src=../js/learn.js?1703459771></script><script src=../js/hugo-learn.js?1703459771></script><script src=../mermaid/mermaid.js?1703459771></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>